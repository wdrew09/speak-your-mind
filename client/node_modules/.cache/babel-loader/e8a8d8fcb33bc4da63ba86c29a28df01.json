{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/macbookpro/PersonalProjects/speakyourmind/client/src/Components/postView.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport * as actionCreators from '../store/actions/index';\nimport { axiosInstance } from '../index';\nimport { Dropdown } from 'react-bootstrap'; // import styles from \n\nconst PostView = props => {\n  _s();\n\n  const [postsList, setPostsList] = useState([]);\n  const [likedPosts, setLikedPosts] = useState([]);\n  const [dislikedPosts, setDislikedPosts] = useState([]);\n  useEffect(() => {\n    axiosInstance.get('posts/').then(response => {\n      if (response.data.length > 0) {\n        setPostsList(response.data);\n      } else {\n        console.log('error retrieving posts');\n      }\n    });\n    getLikedAndDisliked();\n  }, []);\n\n  const getLikedAndDisliked = () => {\n    console.log(props.userId);\n    axiosInstance.get('account/info', {\n      userId: props.userId\n    }).then(response => {\n      if (response.data.length > 0) {\n        console.log(response.data.likedPosts);\n        setLikedPosts(response.data.likedPosts);\n        setDislikedPosts(response.data.dislikedPosts);\n      } else {\n        console.log('error retrieving user info');\n      }\n    });\n  };\n\n  const postFilter = filterType => {\n    let unfilteredList = postsList;\n\n    if (filterType == 'popular') {\n      unfilteredList.sort((a, b) => a.likes > b.likes);\n    } else if (filterType == 'contraversal') {\n      unfilteredList.sort((a, b) => a.dislikes > b.dislikes);\n    } else if (filterType == 'oldest') {\n      unfilteredList.sort((a, b) => a.date > b.date);\n    } else if (filterType == 'newest') {\n      unfilteredList.sort((a, b) => a.date < b.date);\n    }\n  };\n\n  const likePost = postId => {\n    console.log(props.token);\n    axiosInstance.patch('/posts/like/' + postId, {\n      userId: props.userId,\n      token: props.token,\n      postId: postId\n    }).then(response => {\n      console.log(response);\n    });\n    getLikedAndDisliked();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Dropdown, {\n      children: [/*#__PURE__*/_jsxDEV(Dropdown.Toggle, {\n        variant: \"success\",\n        id: \"dropdown-basic\",\n        children: \"Dropdown Button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Dropdown.Menu, {\n        children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: () => postFilter('popular'),\n          children: \"Popular\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: () => postFilter('contraversal'),\n          children: \"Contraversal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: () => postFilter('oldest'),\n          children: \"Oldest First\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: () => postFilter('newest'),\n          children: \"Newest First\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), \"Posts\", postsList.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: post.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: post._id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => likePost(post._id),\n          children: \"Like\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 18\n        }, this), likedPosts.indexOf(post._id) > -1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"I like this post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 112\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this)]\n    }, post._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this)), \"End Posts\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n\n_s(PostView, \"SptZNWN58I2x/am/1YcrHzOzYPE=\");\n\n_c = PostView;\n\nconst mapStateToProps = state => {\n  return {\n    userId: state.auth.userId,\n    username: state.auth.username,\n    token: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setAlert: (message, style) => dispatch(actionCreators.setAlert(message, style))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostView);\n\nvar _c;\n\n$RefreshReg$(_c, \"PostView\");","map":{"version":3,"sources":["/Users/macbookpro/PersonalProjects/speakyourmind/client/src/Components/postView.js"],"names":["React","useEffect","useState","Link","Redirect","connect","actionCreators","axiosInstance","Dropdown","PostView","props","postsList","setPostsList","likedPosts","setLikedPosts","dislikedPosts","setDislikedPosts","get","then","response","data","length","console","log","getLikedAndDisliked","userId","postFilter","filterType","unfilteredList","sort","a","b","likes","dislikes","date","likePost","postId","token","patch","map","post","title","content","_id","indexOf","mapStateToProps","state","auth","username","mapDispatchToProps","dispatch","setAlert","message","style"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport * as actionCreators from '../store/actions/index';\nimport { axiosInstance } from '../index';\n\nimport { Dropdown } from 'react-bootstrap';\n\n// import styles from \n\nconst PostView = props => {\n    const [postsList, setPostsList] = useState([])\n    const [likedPosts, setLikedPosts] = useState([])\n    const [dislikedPosts, setDislikedPosts] = useState([])\n\n    useEffect(() => {\n        axiosInstance.get('posts/')\n            .then(response => {\n                if (response.data.length > 0) {\n                    setPostsList(response.data)\n                } else {\n                    console.log('error retrieving posts')\n                }\n            })\n\n            getLikedAndDisliked()\n    }, [])\n\n    const getLikedAndDisliked = () => {\n        console.log(props.userId)\n        axiosInstance.get('account/info', {\n            userId: props.userId\n        })\n        .then(response => {\n            if (response.data.length > 0) {\n                console.log(response.data.likedPosts)\n                setLikedPosts(response.data.likedPosts)\n                setDislikedPosts(response.data.dislikedPosts)\n            } else {\n                console.log('error retrieving user info')\n            }\n        })\n    }\n\n    const postFilter = (filterType) => {\n        let unfilteredList = postsList\n        if (filterType == 'popular') {\n            unfilteredList.sort((a, b) => (a.likes > b.likes))\n        } else if (filterType == 'contraversal') {\n            unfilteredList.sort((a, b) => (a.dislikes > b.dislikes))\n        } else if (filterType == 'oldest') {\n            unfilteredList.sort((a, b) => (a.date > b.date))\n        } else if (filterType == 'newest') {\n            unfilteredList.sort((a, b) => (a.date < b.date))\n        }\n    }\n\n    const likePost = (postId) => {\n        console.log(props.token)\n        axiosInstance.patch('/posts/like/' + postId, {\n            userId: props.userId,\n            token: props.token,\n            postId: postId\n        }).then(response => {\n            console.log(response)\n        })\n        getLikedAndDisliked()\n    }\n\n    return (\n        <div>\n            <Dropdown>\n                <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\n                    Dropdown Button\n                </Dropdown.Toggle>\n\n                <Dropdown.Menu>\n                    <Dropdown.Item onClick={() => postFilter('popular')}>Popular</Dropdown.Item>\n                    <Dropdown.Item onClick={() => postFilter('contraversal')}>Contraversal</Dropdown.Item>\n                    <Dropdown.Item onClick={() => postFilter('oldest')}>Oldest First</Dropdown.Item>\n                    <Dropdown.Item onClick={() => postFilter('newest')}>Newest First</Dropdown.Item>\n                </Dropdown.Menu>\n            </Dropdown>\n            Posts\n            {postsList.map((post) => (\n                <div key={post._id}>\n                    <div>{post.title}</div>\n                    <div>{post.content}</div>\n                    <div>{post._id}</div>\n            <div><button onClick={() => likePost(post._id)}>Like</button>{likedPosts.indexOf(post._id) > -1 && <div>I like this post</div>}</div>\n                    <br />\n                    <br />\n                </div>\n            ))}\n            End Posts\n        </div>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        userId: state.auth.userId,\n        username: state.auth.username,\n        token: state.auth.token\n    };\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setAlert: (message, style) => dispatch(actionCreators.setAlert(message, style))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostView);"]},"metadata":{},"sourceType":"module"}