{"ast":null,"code":"import * as actionTypes from './actionTypes';\nimport { axiosInstance } from '../../index';\nimport { setInStorage, getFromStorage } from '../../utils/storage';\nexport const login = (username, password) => {\n  return dispatch => {\n    axiosInstance.post('account/login', {\n      username: username,\n      password: password\n    }).then(response => {\n      console.log(response);\n\n      if (response.data.success) {\n        setInStorage('speak_your_mind', {\n          token: response.data.token\n        });\n        let token = response.data.token;\n        let userId = response.data.userId;\n        dispatch(setLogin(token, userId, username));\n      } else {}\n    });\n  };\n};\nexport const setLogin = (token, userId, username) => {\n  console.log(token, userId);\n  return {\n    type: actionTypes.SET_LOGIN,\n    token: token,\n    userId: userId,\n    username: username\n  };\n};\nexport const logout = () => {\n  return dispatch => {\n    let obj = getFromStorage('speak_your_mind');\n\n    if (obj && obj.token) {\n      let token = obj.token;\n      axiosInstance.get('account/logout?token=' + token).then(response => {\n        if (response.data.success) {\n          localStorage.removeItem('speak_your_mind');\n          dispatch(setLogout());\n        } else {\n          console.log('error');\n        }\n      });\n    } else {\n      console.log('No token found');\n    }\n  };\n};\nexport const setLogout = () => {\n  return {\n    type: actionTypes.LOGOUT,\n    token: ''\n  };\n};","map":{"version":3,"sources":["/Users/macbookpro/PersonalProjects/speakyourmind/client/src/store/actions/auth.js"],"names":["actionTypes","axiosInstance","setInStorage","getFromStorage","login","username","password","dispatch","post","then","response","console","log","data","success","token","userId","setLogin","type","SET_LOGIN","logout","obj","get","localStorage","removeItem","setLogout","LOGOUT"],"mappings":"AAAA,OAAO,KAAKA,WAAZ,MAA6B,eAA7B;AACA,SAASC,aAAT,QAA8B,aAA9B;AAEA,SACIC,YADJ,EAEIC,cAFJ,QAGO,qBAHP;AAKA,OAAO,MAAMC,KAAK,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;AACzC,SAAOC,QAAQ,IAAI;AACfN,IAAAA,aAAa,CAACO,IAAd,CAAmB,eAAnB,EAAoC;AAChCH,MAAAA,QAAQ,EAAEA,QADsB;AAEhCC,MAAAA,QAAQ,EAAEA;AAFsB,KAApC,EAGGG,IAHH,CAGQC,QAAQ,IAAI;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,UAAIA,QAAQ,CAACG,IAAT,CAAcC,OAAlB,EAA2B;AACvBZ,QAAAA,YAAY,CAAC,iBAAD,EAAoB;AAAEa,UAAAA,KAAK,EAAEL,QAAQ,CAACG,IAAT,CAAcE;AAAvB,SAApB,CAAZ;AACA,YAAIA,KAAK,GAAGL,QAAQ,CAACG,IAAT,CAAcE,KAA1B;AACA,YAAIC,MAAM,GAAGN,QAAQ,CAACG,IAAT,CAAcG,MAA3B;AACAT,QAAAA,QAAQ,CAACU,QAAQ,CAACF,KAAD,EAAQC,MAAR,EAAgBX,QAAhB,CAAT,CAAR;AACH,OALD,MAKO,CAEN;AACJ,KAbD;AAcH,GAfD;AAgBH,CAjBM;AAmBP,OAAO,MAAMY,QAAQ,GAAG,CAACF,KAAD,EAAQC,MAAR,EAAgBX,QAAhB,KAA6B;AACjDM,EAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ,EAAmBC,MAAnB;AACA,SAAO;AACHE,IAAAA,IAAI,EAAElB,WAAW,CAACmB,SADf;AAEHJ,IAAAA,KAAK,EAAEA,KAFJ;AAGHC,IAAAA,MAAM,EAAEA,MAHL;AAIHX,IAAAA,QAAQ,EAAEA;AAJP,GAAP;AAMH,CARM;AAUP,OAAO,MAAMe,MAAM,GAAG,MAAM;AACxB,SAAOb,QAAQ,IAAI;AACf,QAAIc,GAAG,GAAGlB,cAAc,CAAC,iBAAD,CAAxB;;AAEA,QAAIkB,GAAG,IAAIA,GAAG,CAACN,KAAf,EAAsB;AAClB,UAAIA,KAAK,GAAGM,GAAG,CAACN,KAAhB;AACAd,MAAAA,aAAa,CAACqB,GAAd,CAAkB,0BAA0BP,KAA5C,EACKN,IADL,CACUC,QAAQ,IAAI;AACd,YAAIA,QAAQ,CAACG,IAAT,CAAcC,OAAlB,EAA2B;AACvBS,UAAAA,YAAY,CAACC,UAAb,CAAwB,iBAAxB;AACAjB,UAAAA,QAAQ,CAACkB,SAAS,EAAV,CAAR;AACH,SAHD,MAGO;AACHd,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACH;AACJ,OARL;AASH,KAXD,MAWO;AACHD,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH;AACJ,GAjBD;AAkBH,CAnBM;AAqBP,OAAO,MAAMa,SAAS,GAAG,MAAM;AAC3B,SAAO;AACHP,IAAAA,IAAI,EAAElB,WAAW,CAAC0B,MADf;AAEHX,IAAAA,KAAK,EAAE;AAFJ,GAAP;AAIH,CALM","sourcesContent":["import * as actionTypes from './actionTypes';\nimport { axiosInstance } from '../../index';\n\nimport {\n    setInStorage,\n    getFromStorage\n} from '../../utils/storage'\n\nexport const login = (username, password) => {\n    return dispatch => {\n        axiosInstance.post('account/login', {\n            username: username,\n            password: password,\n        }).then(response => {\n            console.log(response)\n            if (response.data.success) {\n                setInStorage('speak_your_mind', { token: response.data.token })\n                let token = response.data.token;\n                let userId = response.data.userId\n                dispatch(setLogin(token, userId, username))\n            } else {\n\n            }\n        });\n    };\n}\n\nexport const setLogin = (token, userId, username) => {\n    console.log(token, userId)\n    return {\n        type: actionTypes.SET_LOGIN,\n        token: token,\n        userId: userId,\n        username: username\n    };\n}\n\nexport const logout = () => {\n    return dispatch => {\n        let obj = getFromStorage('speak_your_mind')\n\n        if (obj && obj.token) {\n            let token = obj.token\n            axiosInstance.get('account/logout?token=' + token)\n                .then(response => {\n                    if (response.data.success) {\n                        localStorage.removeItem('speak_your_mind')\n                        dispatch(setLogout())\n                    } else {\n                        console.log('error')\n                    }\n                })\n        } else {\n            console.log('No token found')\n        }\n    }\n}\n\nexport const setLogout = () => {\n    return {\n        type: actionTypes.LOGOUT,\n        token: '',\n    };\n}"]},"metadata":{},"sourceType":"module"}